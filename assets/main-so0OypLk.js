import{g as T,c as O,a as F,r as u,j as l,S as D,N as B,P as U,b as V,d as X}from"./index-C64cbXBZ.js";const Y="_mySwiper_1xf53_5",G="_swiperSlide_1xf53_17",N={mySwiper:Y,swiperSlide:G,"swiper-slide":"_swiper-slide_1xf53_93"};function Q(h){const{effect:r,swiper:e,on:o,setTranslate:c,setTransition:p,overwriteParams:s,perspective:a,recreateShadows:t,getEffectParams:f}=h;o("beforeInit",()=>{if(e.params.effect!==r)return;e.classNames.push(`${e.params.containerModifierClass}${r}`),a&&a()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const n=s?s():{};Object.assign(e.params,n),Object.assign(e.originalParams,n)}),o("setTranslate",()=>{e.params.effect===r&&c()}),o("setTransition",(n,m)=>{e.params.effect===r&&p(m)}),o("transitionEnd",()=>{if(e.params.effect===r&&t){if(!f||!f().slideShadows)return;e.slides.forEach(n=>{n.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(m=>m.remove())}),t()}});let i;o("virtualUpdate",()=>{e.params.effect===r&&(e.slides.length||(i=!0),requestAnimationFrame(()=>{i&&e.slides&&e.slides.length&&(c(),i=!1)}))})}function W(h,r){const e=T(r);return e!==r&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function C(h,r,e){const o=`swiper-slide-shadow${e?`-${e}`:""}${` swiper-slide-shadow-${h}`}`,c=T(r);let p=c.querySelector(`.${o.split(" ").join(".")}`);return p||(p=O("div",o.split(" ")),c.append(p)),p}function Z(h){let{swiper:r,extendParams:e,on:o}=h;e({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),Q({effect:"coverflow",swiper:r,on:o,setTranslate:()=>{const{width:s,height:a,slides:t,slidesSizesGrid:f}=r,i=r.params.coverflowEffect,n=r.isHorizontal(),m=r.translate,k=n?-m+s/2:-m+a/2,M=n?i.rotate:-i.rotate,H=i.depth,_=F(r);for(let g=0,R=t.length;g<R;g+=1){const w=t[g],v=f[g],z=w.swiperSlideOffset,q=(k-z-v/2)/v,d=typeof i.modifier=="function"?i.modifier(q):q*i.modifier;let b=n?M*d:0,x=n?0:M*d,$=-H*Math.abs(d),S=i.stretch;typeof S=="string"&&S.indexOf("%")!==-1&&(S=parseFloat(i.stretch)/100*v);let I=n?0:S*d,j=n?S*d:0,P=1-(1-i.scale)*Math.abs(d);Math.abs(j)<.001&&(j=0),Math.abs(I)<.001&&(I=0),Math.abs($)<.001&&($=0),Math.abs(b)<.001&&(b=0),Math.abs(x)<.001&&(x=0),Math.abs(P)<.001&&(P=0);const A=`translate3d(${j}px,${I}px,${$}px)  rotateX(${_(x)}deg) rotateY(${_(b)}deg) scale(${P})`,L=W(i,w);if(L.style.transform=A,w.style.zIndex=-Math.abs(Math.round(d))+1,i.slideShadows){let y=n?w.querySelector(".swiper-slide-shadow-left"):w.querySelector(".swiper-slide-shadow-top"),E=n?w.querySelector(".swiper-slide-shadow-right"):w.querySelector(".swiper-slide-shadow-bottom");y||(y=C("coverflow",w,n?"left":"top")),E||(E=C("coverflow",w,n?"right":"bottom")),y&&(y.style.opacity=d>0?d:0),E&&(E.style.opacity=-d>0?-d:0)}}},setTransition:s=>{r.slides.map(t=>T(t)).forEach(t=>{t.style.transitionDuration=`${s}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(f=>{f.style.transitionDuration=`${s}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function J(){const[h,r]=u.useState([]),[e,o]=u.useState(0),c=u.useRef(null);u.useEffect(()=>{(()=>{const t=new URLSearchParams(window.location.hash.substring(1)),f=t.get("feed"),i=parseInt(t.get("scene"),10);console.log(`Initial hash params - feed: ${f}, scene: ${i}`),window.history.replaceState(null,null,"#feed=nasa&scene=1"),o(1)})(),(async()=>{try{const t=await fetch("https://api.nasa.gov/planetary/apod?api_key=7BdaDaLN7EHQyb8Db3NDkE1dPSniiIG2oE0wvt64&hd=True&count=5");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const f=await t.json();r(f)}catch(t){console.error("Failed to fetch images: "+t)}})()},[]),u.useEffect(()=>{const s=()=>{const a=new URLSearchParams(window.location.hash.substring(1)),t=parseInt(a.get("scene"),10);!isNaN(t)&&t>0&&t<6&&c.current?c.current.swiper.slideTo(t-1):c.current.swiper.slideTo(0)};return window.addEventListener("hashchange",s),()=>{window.removeEventListener("hashchange",s)}},[]);const p=s=>{const a=s.realIndex+1;o(a),window.history.replaceState(null,null,`#feed=nasa&scene=${a}`)};return u.useEffect(()=>{console.log(`activeIndex updated: ${e}`)},[e]),u.useEffect(()=>{(()=>{document.querySelectorAll(".swiper-slide iframe").forEach(a=>{a.addEventListener("mouseenter",()=>{a.style.pointerEvents="auto"}),a.addEventListener("mouseleave",()=>{a.style.pointerEvents="none"})})})()},[h]),l.jsx("div",{children:l.jsx(D,{effect:"coverflow",grabCursor:!0,rewind:!0,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{stretch:0,depth:100,modifier:1,slideShadows:!0},modules:[Z,B,U],spaceBetween:50,navigation:!0,pagination:{clickable:!0},onSlideChange:p,className:N.mySwiper,initialSlide:0,ref:c,children:h.map((s,a)=>l.jsx(V,{className:N.swiperSlide,children:l.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:[s.media_type==="video"?l.jsx("iframe",{src:s.url,title:s.title,allowFullScreen:!0}):l.jsx("img",{src:s.url,alt:s.title||"Slide Image"}),l.jsx("p",{children:s.title})]})},a))})})}function K(){return l.jsx(l.Fragment,{children:l.jsx(J,{})})}X(document.getElementById("root")).render(l.jsx(u.StrictMode,{children:l.jsx(K,{})}));

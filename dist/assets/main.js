import{g as M,c as F,a as L,r as u,j as l,S as U,N as Y,P as B,b as D,d as V}from"./index.js";const X="_mySwiper_1xf53_5",G="_swiperSlide_1xf53_17",C={mySwiper:X,swiperSlide:G,"swiper-slide":"_swiper-slide_1xf53_93"};function K(h){const{effect:r,swiper:e,on:o,setTranslate:c,setTransition:p,overwriteParams:s,perspective:a,recreateShadows:t,getEffectParams:f}=h;o("beforeInit",()=>{if(e.params.effect!==r)return;e.classNames.push(`${e.params.containerModifierClass}${r}`),a&&a()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const n=s?s():{};Object.assign(e.params,n),Object.assign(e.originalParams,n)}),o("setTranslate",()=>{e.params.effect===r&&c()}),o("setTransition",(n,m)=>{e.params.effect===r&&p(m)}),o("transitionEnd",()=>{if(e.params.effect===r&&t){if(!f||!f().slideShadows)return;e.slides.forEach(n=>{n.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(m=>m.remove())}),t()}});let i;o("virtualUpdate",()=>{e.params.effect===r&&(e.slides.length||(i=!0),requestAnimationFrame(()=>{i&&e.slides&&e.slides.length&&(c(),i=!1)}))})}function W(h,r){const e=M(r);return e!==r&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function N(h,r,e){const o=`swiper-slide-shadow${e?`-${e}`:""}${` swiper-slide-shadow-${h}`}`,c=M(r);let p=c.querySelector(`.${o.split(" ").join(".")}`);return p||(p=F("div",o.split(" ")),c.append(p)),p}function Z(h){let{swiper:r,extendParams:e,on:o}=h;e({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),K({effect:"coverflow",swiper:r,on:o,setTranslate:()=>{const{width:s,height:a,slides:t,slidesSizesGrid:f}=r,i=r.params.coverflowEffect,n=r.isHorizontal(),m=r.translate,O=n?-m+s/2:-m+a/2,T=n?i.rotate:-i.rotate,R=i.depth,_=L(r);for(let S=0,k=t.length;S<k;S+=1){const w=t[S],v=f[S],z=w.swiperSlideOffset,q=(O-z-v/2)/v,d=typeof i.modifier=="function"?i.modifier(q):q*i.modifier;let x=n?T*d:0,b=n?0:T*d,$=-R*Math.abs(d),g=i.stretch;typeof g=="string"&&g.indexOf("%")!==-1&&(g=parseFloat(i.stretch)/100*v);let I=n?0:g*d,j=n?g*d:0,P=1-(1-i.scale)*Math.abs(d);Math.abs(j)<.001&&(j=0),Math.abs(I)<.001&&(I=0),Math.abs($)<.001&&($=0),Math.abs(x)<.001&&(x=0),Math.abs(b)<.001&&(b=0),Math.abs(P)<.001&&(P=0);const A=`translate3d(${j}px,${I}px,${$}px)  rotateX(${_(b)}deg) rotateY(${_(x)}deg) scale(${P})`,H=W(i,w);if(H.style.transform=A,w.style.zIndex=-Math.abs(Math.round(d))+1,i.slideShadows){let y=n?w.querySelector(".swiper-slide-shadow-left"):w.querySelector(".swiper-slide-shadow-top"),E=n?w.querySelector(".swiper-slide-shadow-right"):w.querySelector(".swiper-slide-shadow-bottom");y||(y=N("coverflow",w,n?"left":"top")),E||(E=N("coverflow",w,n?"right":"bottom")),y&&(y.style.opacity=d>0?d:0),E&&(E.style.opacity=-d>0?-d:0)}}},setTransition:s=>{r.slides.map(t=>M(t)).forEach(t=>{t.style.transitionDuration=`${s}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(f=>{f.style.transitionDuration=`${s}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function J(){const[h,r]=u.useState([]),[e,o]=u.useState(0),c=u.useRef(null);u.useEffect(()=>{(()=>{const t=new URLSearchParams(window.location.hash.substring(1)),f=t.get("feed"),i=parseInt(t.get("scene"),10);console.log(`Initial hash params - feed: ${f}, scene: ${i}`),window.history.replaceState(null,null,"#feed=nasa&scene=1"),o(1)})(),(async()=>{try{const t=await fetch("https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&hd=True&count=5");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const f=await t.json();r(f)}catch(t){console.error("Failed to fetch images: "+t)}})()},[]),u.useEffect(()=>{const s=()=>{const a=new URLSearchParams(window.location.hash.substring(1)),t=parseInt(a.get("scene"),10);!isNaN(t)&&t>0&&t<6&&c.current?c.current.swiper.slideTo(t-1):c.current.swiper.slideTo(0)};return window.addEventListener("hashchange",s),()=>{window.removeEventListener("hashchange",s)}},[]);const p=s=>{const a=s.realIndex+1;o(a),window.history.replaceState(null,null,`#feed=nasa&scene=${a}`)};return u.useEffect(()=>{console.log(`activeIndex updated: ${e}`)},[e]),u.useEffect(()=>{(()=>{document.querySelectorAll(".swiper-slide iframe").forEach(a=>{a.addEventListener("mouseenter",()=>{a.style.pointerEvents="auto"}),a.addEventListener("mouseleave",()=>{a.style.pointerEvents="none"})})})()},[h]),l.jsx("div",{className:"styles.swiperContainer",children:l.jsx(U,{effect:"coverflow",grabCursor:!0,rewind:!0,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:40,stretch:0,depth:100,modifier:1,slideShadows:!1},modules:[Z,Y,B],spaceBetween:50,navigation:!0,pagination:{clickable:!0},onSlideChange:p,className:C.mySwiper,initialSlide:0,slidesPerGroup:1,ref:c,children:h.map((s,a)=>l.jsx(D,{className:C.swiperSlide,children:l.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:[s.media_type==="video"?l.jsx("iframe",{src:s.url,title:s.title,allowFullScreen:!0}):l.jsx("img",{src:s.url,alt:s.title||"Slide Image"}),l.jsx("p",{children:s.title})]})},a))})})}function Q(){return l.jsx(l.Fragment,{children:l.jsx(J,{})})}V(document.getElementById("root")).render(l.jsx(u.StrictMode,{children:l.jsx(Q,{})}));
